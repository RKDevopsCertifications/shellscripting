pipeline {
    agent{
        label "jenkins1"
    }
    stages {
        stage('Build') {
            steps {
                echo 'Building...'
                git branch: 'main', url: 'https://github.com/RKDevopsCertifications/shellscripting.git'
            }
        }
        stage('Test') {
            steps {
                echo 'Testing...'
                def shellScripts = sh(script: 'ls *.sh', returnStdout: true).trim().split('\n')
                    
                    // Execute each shell script
                    for (script in shellScripts) {
                        echo "Running ${script}..."
                        sh "chmod +x ${script}"
                        sh "./${script}"
                    }
            }
        }
        stage('Deploy') {
            steps {
                echo 'Deploying...'
                // Add your deploy steps here
            }
        }
    }
}
